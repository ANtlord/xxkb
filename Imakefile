#include "xxkb.tmpl"

BASEDIR = $(PROJECTROOT)
BINDIR = $(BASEDIR)/bin
PIXMAPDIR = $(BASEDIR)/share/xxkb
LOCAL_LIBRARIES = $(XONLYLIB) -lXpm -lXt

OBJS = xxkb.o resource.o wlist.o
PIXMAPS = pixmaps/\*.xpm

DEFINES = -DAPPDEFDIR=\"$(DESTDIR)$(XAPPLOADDIR)\" -DAPPDEFFILE=\"XXkb\" \
	-DXT_RESOURCE_SEARCH -DSHAPE_EXT

#if WITH_SVG_SUPPORT
CFLAGS += `pkg-config --cflags glib-2.0 gdk-pixbuf-xlib-2.0 librsvg-2.0`
LOCAL_LIBRARIES += `pkg-config --libs glib-2.0 gdk-pixbuf-xlib-2.0 librsvg-2.0`
DEFINES += -DSVG_GRAPHICS
#endif

CDEBUGFLAGS = -O2 -Wall
SED = sed

ComplexProgramTarget(xxkb)

PatchFile(XXkb.ad.var,XXkb.ad,"s#PIXMAPDIR#$(DESTDIR)$(PIXMAPDIR)#g")
InstallAppDefaults(XXkb)

InstallMultiple($(PIXMAPS),$(PIXMAPDIR))
